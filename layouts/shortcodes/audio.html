{{ $src := .Get "src" }} {{/* Get full relative path to the content file */}} {{
$path := .Page.File.Path }} {{/* Extract the book name: assumes structure like
'content/book1/...' */}} {{ $segments := split $path "/" }} {{ $book := index
$segments 0 }} {{/* Compose the full URL using the dynamic book name */}} {{
$url := printf "https://xiangcaoshan.netlify.app/.netlify/functions/%s?file=%s"
$book ($src | urlquery) }}

<audio controls>
  <source src="{{ $url }}" type="audio/mpeg" />
  Your browser does not support the audio element.
</audio>
