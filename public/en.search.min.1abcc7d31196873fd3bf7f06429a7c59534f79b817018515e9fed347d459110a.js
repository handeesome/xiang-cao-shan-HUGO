"use strict";(function(){const a="/en.search-data.min.588c673890c4622f425824c75defe670df1036e56641d18cb7756169311827ea.json",r=Object.assign({cache:!0},{includeScore:!0,useExtendedSearch:!0,fieldNormWeight:1.5,threshold:.2,ignoreLocation:!0,keys:[{name:"title",weight:.7},{name:"content",weight:.3}]}),e=document.querySelector("#book-search-input"),n=document.querySelector("#book-search-results");if(!e)return;const t=e.getAttribute("data-section")||"";console.log("Current section:",t),e.addEventListener("focus",s),e.addEventListener("keyup",o),document.addEventListener("keypress",c);function c(t){if(t.target.value!==0[0])return;if(e===document.activeElement)return;const n=String.fromCharCode(t.charCode);if(!l(n))return;e.focus(),t.preventDefault()}function l(t){const n=e.getAttribute("data-hotkeys")||"";return n.indexOf(t)>=0}function s(){e.removeEventListener("focus",s),e.required=!0,fetch(a).then(e=>e.json()).then(e=>{console.log("All pages:",e),console.log("Pages with sections:",e.map(e=>({title:e.title,section:e.section,href:e.href})));const s=[...new Set(e.map(e=>e.section))];console.log("Unique sections found:",s);const o=e.filter(e=>e.href&&e.href.includes("book2"));console.log("Pages with book2 in href:",o);let n=e;t&&(n=e.filter(e=>(console.log(`Comparing page section "${e.section}" with current section "${t}"`),e.section===t)),console.log("Filtered pages for section:",n)),window.bookSearchIndex=new Fuse(n,r),console.log("Search index created with",n.length,"pages")}).then(()=>e.required=!1).then(o)}function o(){for(;n.firstChild;)n.removeChild(n.firstChild);if(!e.value)return;const s=window.bookSearchIndex.search(e.value).slice(0,10);if(console.log("Search query:",e.value),console.log("Search hits:",s),s.length===0){const e=i('<li class="no-results"><span></span></li>'),s=e.querySelector("span");s.textContent=`No results found${t?` in ${t}`:""}`,n.appendChild(e);return}s.forEach(function(e){const s=i("<li><a href></a><small></small></li>"),o=s.querySelector("a"),a=s.querySelector("small");o.href=e.item.href,o.textContent=e.item.title,t?a.textContent=e.item.section||"":a.textContent=e.item.section?`ðŸ“– ${e.item.section}`:"",n.appendChild(s)})}function i(e){const t=document.createElement("div");return t.innerHTML=e,t.firstChild}})()